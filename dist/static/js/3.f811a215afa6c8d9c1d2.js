webpackJsonp([3],{"3/Kq":function(e,t,a){"use strict";var r=a("lC5x"),l=a.n(r),n=a("J0Oq"),s=a.n(n),i={components:{},mixins:[],props:["alrmInfo"],data:function(){return{}},watch:{},computed:{},created:function(){},mounted:function(){},methods:{submit:function(){var e=this;return s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$equApi.updateAlarmStatus,{alarmId:e.alrmInfo.alarmId,alarmStatus:"processed"});case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"处理成功"}),e.$emit("resolveAlarm"));case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.$emit("closePopup")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{inline:!1,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"设备编码:"}},[a("span",[e._v(e._s(e.alrmInfo.deviceCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"设备名称:"}},[a("span",[e._v(e._s(e.alrmInfo.deviceName))])]),e._v(" "),a("el-form-item",{attrs:{label:"安装片区:"}},[a("span",[e._v(e._s(e.alrmInfo.companyName))])]),e._v(" "),a("el-form-item",{attrs:{label:"安装地址:"}},[a("span",[e._v(e._s(e.alrmInfo.companyAddress))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确认处理")])],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(i,o,!1,function(e){a("J9Se")},"data-v-3aee64b3",null);t.a=m.exports},"7aHC":function(e,t){},CSLi:function(e,t){},J9Se:function(e,t){},"mge/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),l=a.n(r),n=a("J0Oq"),s=a.n(n),i=a("GPKu"),o=(a("+7CC"),a("Q0Ca")),m=a("3/Kq"),u=a("wq4W"),c={components:{resolveAlarm:m.a,transmitAlarm:u.a},props:[],data:function(){var e=this;return{resolveAlarmVisible:!1,transmitAlarmVisible:!1,queryingShowLoading:!1,alrmInfo:{},queryParams:{pageSize:10,pageNumber:1,alarmStatus:"",deviceName:"",alarmType:""},alarmTypeList:[],total:0,pageSize:10,currentPage:1,multipleSelection:[],alarmHistioryList:[],pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()}},tHead:[{prop:"deviceName",label:"设备名称",width:""},{prop:"alarmDate",label:"报警时间",width:"",formatter:function(e,t,a){return Object(i.c)("yyyy-MM-dd hh:mm:ss",new Date(a))}},{prop:"alarmStatus",label:"状态",width:"",formatter:function(e,t,a){return Object(o.alarmStatus)(a)}},{prop:"alarmType",label:"类型",width:"",formatter:function(t,a,r){var l=e.alarmTypeList.find(function(e){return e.value===r});return l?l.name:r}},{prop:"alarmValue",label:"报警值",width:"",formatter:function(e,t,a){var r="";return e.alarmValue&&null!=e.alarmValue&&(r=e.itemName+"-"+e.alarmValue+e.itemUnit),r}},{prop:"companyName",label:"公司名称",width:""},{prop:"companyAddress",label:"公司地址",width:""}],tBody:[]}},watch:{},computed:{},created:function(){},mounted:function(){this.getAlarmList(),this.getAlarmTypeList()},methods:{onQuery:function(){this.queryParams.pageNumber=1,this.getAlarmList()},handleCurrentChange:function(e){this.queryParams.pageNumber=e,this.getAlarmList()},getAlarmList:function(){var e=this;return s()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e,t.next=3,e.$http.post(e.$equApi.alarmList,e.queryParams);case 3:a=t.sent,e.alarmHistioryList=a.data.content,e.total=a.data.totalElements;case 6:case"end":return t.stop()}},t,e)}))()},getAlarmTypeList:function(){var e=this;return s()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e,t.next=3,e.$http.get(e.$equApi.alarmTypes);case 3:a=t.sent,e.alarmTypeList=a.data;case 5:case"end":return t.stop()}},t,e)}))()},resolve:function(e){this.alrmInfo=e,this.resolveAlarmVisible=!0},transmit:function(e){this.alrmInfo=e,this.transmitAlarmVisible=!0},closePopup:function(){this.resolveAlarmVisible=!1,this.transmitAlarmVisible=!1,this.onQuery()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{inline:!0,model:e.queryParams,size:"small"}},[a("el-form-item",{attrs:{label:"设备名称:",prop:"name"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.queryParams.deviceName,callback:function(t){e.$set(e.queryParams,"deviceName","string"==typeof t?t.trim():t)},expression:"queryParams.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态:",prop:"type"}},[a("el-select",{staticClass:"select-method",attrs:{placeholder:"请选择"},model:{value:e.queryParams.alarmStatus,callback:function(t){e.$set(e.queryParams,"alarmStatus",t)},expression:"queryParams.alarmStatus"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(this.$constants.alarmStatusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{staticClass:"select-method",attrs:{placeholder:"请选择"},model:{value:e.queryParams.alarmType,callback:function(t){e.$set(e.queryParams,"alarmType",t)},expression:"queryParams.alarmType"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.alarmTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button-query",attrs:{type:"primary",loading:e.queryingShowLoading},on:{click:e.onQuery}},[e._v("查询\n                ")])],1)],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alarmHistioryList,border:"",size:"small"}},[e._l(e.tHead,function(e){return a("el-table-column",{key:e.prop,attrs:{align:"center",prop:e.prop,label:e.label,width:e.width,formatter:e.formatter}})}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.transmit(t.row)}}},[e._v(" 转发")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.resolve(t.row)}}},[e._v("报警处理")])]}}])})],2),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"page",attrs:{"current-page":e.queryParams.pageNumber,"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, jumper",total:e.total,disabled:e.queryingShowLoading},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),e.resolveAlarmVisible?a("el-dialog",{attrs:{title:"报警处理",visible:e.resolveAlarmVisible,width:"30%"},on:{"update:visible":function(t){e.resolveAlarmVisible=t}}},[a("resolveAlarm",{attrs:{show:e.resolveAlarmVisible,alrmInfo:e.alrmInfo},on:{"update:show":function(t){e.resolveAlarmVisible=t},closePopup:e.closePopup,resolveAlarm:e.closePopup}})],1):e._e(),e._v(" "),e.transmitAlarmVisible?a("el-dialog",{attrs:{title:"报警转发",visible:e.transmitAlarmVisible,width:"30%"},on:{"update:visible":function(t){e.transmitAlarmVisible=t}}},[a("transmitAlarm",{attrs:{show:e.transmitAlarmVisible,alrmInfo:e.alrmInfo},on:{"update:show":function(t){e.transmitAlarmVisible=t},closePopup:e.closePopup}})],1):e._e()],1)},staticRenderFns:[]};var d=a("C7Lr")(c,p,!1,function(e){a("7aHC")},"data-v-07111fc0",null);t.default=d.exports},wq4W:function(e,t,a){"use strict";var r=a("lC5x"),l=a.n(r),n=a("J0Oq"),s=a.n(n),i={components:{},mixins:[],props:["alrmInfo"],data:function(){return{sendForm:{alarmId:this.alrmInfo.alarmId,name:"",mobile:""}}},watch:{},computed:{},created:function(){},mounted:function(){},methods:{send:function(){var e=this;return s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$equApi.sendAlarmMessage,e.sendForm);case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"发送成功"}),e.$emit("closePopup"));case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.$emit("closePopup")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mb10"},[a("ul",[a("li",[e._v("\n                    "+e._s(e.alrmInfo.deviceName)+"报警   "),a("span",{staticClass:"color-red"},[e._v("待处理")])]),e._v(" "),a("li",[e._v("\n                    "+e._s(e.alrmInfo.companyName)+"\n                ")]),e._v(" "),a("li",[e._v("\n                    "+e._s(e.alrmInfo.companyAddress)+"\n                ")])])]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.sendForm,"label-width":"60px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"联系人",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.sendForm.name,callback:function(t){e.$set(e.sendForm,"name",t)},expression:"sendForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.sendForm.mobile,callback:function(t){e.$set(e.sendForm,"mobile",t)},expression:"sendForm.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.send}},[e._v("发 送")])],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(i,o,!1,function(e){a("CSLi")},"data-v-0755bca4",null);t.a=m.exports}});