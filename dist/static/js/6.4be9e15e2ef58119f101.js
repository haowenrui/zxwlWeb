webpackJsonp([6],{"2uwu":function(e,t){},i4tL:function(e,t){},vIID:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),r=a.n(s),n=a("J0Oq"),o=a.n(n),i={components:{},mixins:[],props:["companyInfo","optType"],data:function(){return{form:{address:"",directorTel:"",fireTel:"",fireUnit:"",lat:"",lon:"",name:"",parentId:""}}},watch:{},computed:{},created:function(){},mounted:function(){"modify"==this.optType?this.form=this.companyInfo:this.form.parentId=this.companyInfo.id},methods:{addNew:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$urlApi.addCompony,e.form);case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"操作成功"}),e.$emit("refreshData"));case 4:case"end":return t.stop()}},t,e)}))()},modify:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put(e.$urlApi.editCompony,e.form);case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"操作成功"}),e.$emit("refreshData"));case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.$emit("update:show",!1)},submit:function(){"add"==this.optType?this.addNew():this.modify()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"片区名称:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"==typeof t?t.trim():t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经度:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.lon,callback:function(t){e.$set(e.form,"lon","string"==typeof t?t.trim():t)},expression:"form.lon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat","string"==typeof t?t.trim():t)},expression:"form.lat"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.director,callback:function(t){e.$set(e.form,"director","string"==typeof t?t.trim():t)},expression:"form.director"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.directorTel,callback:function(t){e.$set(e.form,"directorTel","string"==typeof t?t.trim():t)},expression:"form.directorTel"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var c={components:{dialogAdd:a("C7Lr")(i,l,!1,function(e){a("2uwu")},"data-v-7e555ba0",null).exports},mixins:[],props:[],data:function(){return{dialogAdd:!1,dialogTitle:"",companyInfo:{},companyList:[],optType:"add",defaultProps:{children:"children",label:"label"},selectAreaId:"",checkItem:[],selectCount:0}},watch:{},computed:{},created:function(){},mounted:function(){this.getCompany()},methods:{handleNodeClick:function(e){console.log(e)},getCompany:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urlApi.getCompany);case 2:"SUCCESS"==(a=t.sent).result&&(e.companyList=a.data,a.data.length>0&&(e.checkItem.push(a.data[0].value),e.selectAreaId=a.data[0].value,e.getCompanyInfo(e.selectAreaId)));case 4:case"end":return t.stop()}},t,e)}))()},addNew:function(){this.dialogTitle="新增片区",this.optType="add",this.dialogAdd=!0},modify:function(){this.dialogTitle="编辑片区",this.optType="modify",this.dialogAdd=!0},deleteCompany:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$urlApi.deleteCompony,e.selectAreaId);case 2:"SUCCESS"==t.sent.result&&(e.$message.success("删除成功"),e.getCompany());case 4:case"end":return t.stop()}},t,e)}))()},selectArea:function(e){this.selectAreaId="",this.selectAreaId=e.value,this.checkItem=[],this.checkItem.push(e.value),this.getCompanyInfo(this.selectAreaId)},getCompanyInfo:function(e){var t=this;return o()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get(t.$urlApi.getCompanyInfo,{compId:e});case 2:s=a.sent,t.companyInfo=s.data;case 4:case"end":return a.stop()}},a,t)}))()},refreshData:function(){this.dialogAdd=!1,this.getCompany()},handleClick:function(e,t,a){this.$refs.companyTree.setCheckedNodes([]),this.selectCount++,this.selectCount%2==0&&(t?(this.$refs.companyTree.setCheckedNodes([]),this.$refs.companyTree.setCheckedNodes([e])):this.$refs.companyTree.setCheckedNodes([]))}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"area-list fl"},[a("el-tree",{ref:"companyTree",attrs:{data:e.companyList,"check-strictly":"","show-checkbox":"","default-expand-all":"","node-key":"value","highlight-current":"",props:e.defaultProps,"default-checked-keys":e.checkItem},on:{check:e.selectArea,"check-change":e.handleClick}})],1),e._v(" "),a("div",{staticClass:"area-info fl ml20"},[a("div",{staticClass:"clear-fix mb10"},[this.$permissionShow("company_create")?a("el-button",{staticClass:"button-query fl",attrs:{type:"primary",size:"small"},on:{click:e.addNew}},[e._v("新增片区")]):e._e(),e._v(" "),this.$permissionShow("copmany_edit")?a("el-button",{staticClass:"button-query fl",attrs:{type:"primary",size:"small"},on:{click:e.modify}},[e._v("编辑片区")]):e._e(),e._v(" "),this.$permissionShow("company_delete")?a("el-button",{staticClass:"button-query fl ml10",attrs:{type:"warning",size:"small"},on:{click:e.deleteCompany}},[e._v("删除片区")]):e._e()],1),e._v(" "),a("div",[a("el-form",{attrs:{"label-width":"100px",size:"mini","label-position":"left"}},[a("el-form-item",{attrs:{label:"片区名称:"}},[a("span",[e._v(e._s(e.companyInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址:"}},[a("span",[e._v(e._s(e.companyInfo.address))])]),e._v(" "),a("el-form-item",{attrs:{label:"经度:"}},[a("span",[e._v(e._s(e.companyInfo.lon))])]),e._v(" "),a("el-form-item",{attrs:{label:"纬度:"}},[a("span",[e._v(e._s(e.companyInfo.lat))])]),e._v(" "),a("el-form-item",{attrs:{label:"负责人:"}},[a("span",[e._v(e._s(e.companyInfo.director))])]),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话:"}},[a("span",[e._v(e._s(e.companyInfo.directorTel))])])],1)],1)]),e._v(" "),e.dialogAdd?a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogAdd,width:"60%"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("dialogAdd",{attrs:{show:e.dialogAdd,optType:e.optType,companyInfo:e.companyInfo},on:{"update:show":function(t){e.dialogAdd=t},refreshData:e.refreshData}})],1):e._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(c,d,!1,function(e){a("i4tL")},"data-v-e329854e",null);t.default=m.exports}});