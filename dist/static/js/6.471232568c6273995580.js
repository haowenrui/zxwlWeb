webpackJsonp([6],{"97bl":function(e,t){},DKBE:function(e,t){},avUo:function(e,t){},mJIC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("lC5x"),s=a.n(o),r=a("J0Oq"),i=a.n(r),n=a("GPKu"),l=a("Q0Ca"),m={components:{},mixins:[],props:["equipmentInfo"],data:function(){return{form:{hostId:this.equipmentInfo.hostId,hostQRCode:"",hostName:"",hostType:"",hostTypeMini:"",insUserId:"",insLocation:"",insDate:"",ccid:"",useStatus:"",transferMethod:"",isSimulate:"",letterAgreement:"",version:"",proComCode:"",proComName:"",proType:"",opeCompany:"",opeService:"",insFrequency:"",overTime:"",fireFacility:"",createTime:"",companyId:"",companyCode:"",addHostUserId:"",addHostUserCode:"",addHostUserName:"",hostOnline:"",equipmentConfigerCode:""},hostList:[],miniTypeList:[]}},watch:{},computed:{},created:function(){this.equipmentInfo.hostId&&this.queryEquipmentInfo()},mounted:function(){this.queryHostType(),this.queryMiniType()},methods:{queryHostType:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findMiniTypeByNoteAndParentCode,{note:"主机"});case 2:a=t.sent,e.hostList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},queryMiniType:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findMiniTypeByNoteAndParentCode,{note:"",parent_code:"5",type:"设备类型"});case 2:a=t.sent,e.miniTypeList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.$emit("update:show",!1)},addNew:function(){var e=this;this.$refs.form.validate(function(t){t?e._addAndModifyEquipment():e.$message({showClose:!0,message:errorMsg,type:"error"})})},queryEquipmentInfo:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findByHostId,{hostId:e.equipmentInfo.hostId});case 2:(a=t.sent).data.createTime=Object(l.dateFormatFilter)(a.data.createTime,"yyyy-MM-dd hh:mm:ss"),a.data.insDate=Object(l.dateFormatFilter)(a.data.insDate,"yyyy-MM-dd hh:mm:ss"),a.data.overTime=Object(l.dateFormatFilter)(a.data.overTime,"yyyy-MM-dd hh:mm:ss"),e.form=a.data;case 7:case"end":return t.stop()}},t,e)}))()},_addAndModifyEquipment:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,e.equipmentInfo.hostId){t.next=7;break}return t.next=4,e.$http.post(e.$equApi.hostSave,e.form);case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,e.$http.post(e.$equApi.hostUpdate,e.form);case 9:a=t.sent;case 10:"SUCCESS"==a.result&&(e.$emit("update:show",!1),e.$emit("refreshData"),e.$message({showClose:!0,message:"添加成功",type:"success"}));case 11:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,inline:!0,"label-width":"140px",size:"mini"}},[a("el-form-item",{attrs:{label:"主机编码:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.hostQRCode,callback:function(t){e.$set(e.form,"hostQRCode","string"==typeof t?t.trim():t)},expression:"form.hostQRCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名称:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.hostName,callback:function(t){e.$set(e.form,"hostName","string"==typeof t?t.trim():t)},expression:"form.hostName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机类型:"}},[a("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.hostType,callback:function(t){e.$set(e.form,"hostType",t)},expression:"form.hostType"}},e._l(e.hostList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"主机小类型:"}},[a("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.hostTypeMini,callback:function(t){e.$set(e.form,"hostTypeMini",t)},expression:"form.hostTypeMini"}},e._l(e.miniTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"安装人id:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.insUserId,callback:function(t){e.$set(e.form,"insUserId","string"==typeof t?t.trim():t)},expression:"form.insUserId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装位置:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.insLocation,callback:function(t){e.$set(e.form,"insLocation","string"==typeof t?t.trim():t)},expression:"form.insLocation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装日期:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.insDate,callback:function(t){e.$set(e.form,"insDate","string"==typeof t?t.trim():t)},expression:"form.insDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CCID:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.ccid,callback:function(t){e.$set(e.form,"ccid","string"==typeof t?t.trim():t)},expression:"form.ccid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状况:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.useStatus,callback:function(t){e.$set(e.form,"useStatus","string"==typeof t?t.trim():t)},expression:"form.useStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传输方式:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.transferMethod,callback:function(t){e.$set(e.form,"transferMethod","string"==typeof t?t.trim():t)},expression:"form.transferMethod"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否模拟:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.isSimulate,callback:function(t){e.$set(e.form,"isSimulate","string"==typeof t?t.trim():t)},expression:"form.isSimulate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通信协议:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.letterAgreement,callback:function(t){e.$set(e.form,"letterAgreement","string"==typeof t?t.trim():t)},expression:"form.letterAgreement"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version","string"==typeof t?t.trim():t)},expression:"form.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"厂家编码:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.proComCode,callback:function(t){e.$set(e.form,"proComCode","string"==typeof t?t.trim():t)},expression:"form.proComCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生产商:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.proComName,callback:function(t){e.$set(e.form,"proComName","string"==typeof t?t.trim():t)},expression:"form.proComName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品类型:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.proType,callback:function(t){e.$set(e.form,"proType","string"==typeof t?t.trim():t)},expression:"form.proType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属企业标识号:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.opeCompany,callback:function(t){e.$set(e.form,"opeCompany","string"==typeof t?t.trim():t)},expression:"form.opeCompany"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属服务器标识号:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.opeService,callback:function(t){e.$set(e.form,"opeService","string"==typeof t?t.trim():t)},expression:"form.opeService"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"巡检频次:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.insFrequency,callback:function(t){e.$set(e.form,"insFrequency","string"==typeof t?t.trim():t)},expression:"form.insFrequency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"过保时间:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.overTime,callback:function(t){e.$set(e.form,"overTime","string"==typeof t?t.trim():t)},expression:"form.overTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消防设施:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.fireFacility,callback:function(t){e.$set(e.form,"fireFacility","string"==typeof t?t.trim():t)},expression:"form.fireFacility"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"片区id:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.companyId,callback:function(t){e.$set(e.form,"companyId","string"==typeof t?t.trim():t)},expression:"form.companyId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"片区编码:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.companyCode,callback:function(t){e.$set(e.form,"companyCode","string"==typeof t?t.trim():t)},expression:"form.companyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户名Id:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.addHostUserId,callback:function(t){e.$set(e.form,"addHostUserId","string"==typeof t?t.trim():t)},expression:"form.addHostUserId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户编码:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.addHostUserCode,callback:function(t){e.$set(e.form,"addHostUserCode","string"==typeof t?t.trim():t)},expression:"form.addHostUserCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户名:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.addHostUserName,callback:function(t){e.$set(e.form,"addHostUserName","string"==typeof t?t.trim():t)},expression:"form.addHostUserName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在线:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.hostOnline,callback:function(t){e.$set(e.form,"hostOnline","string"==typeof t?t.trim():t)},expression:"form.hostOnline"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备配置编码:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.equipmentConfigerCode,callback:function(t){e.$set(e.form,"equipmentConfigerCode","string"==typeof t?t.trim():t)},expression:"form.equipmentConfigerCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addNew}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(m,c,!1,function(e){a("97bl")},"data-v-3640e741",null).exports,u=a("a3Yh"),d=a.n(u),f=a("5YEj"),h=a.n(f),v={components:{},mixins:[],props:["equipmentInfo"],data:function(){var e;return e={queryingShowLoading:!1,form:{},typeList:[]},d()(e,"queryingShowLoading",!1),d()(e,"queryParams",{itemCode:"",equipmentId:this.equipmentInfo.deviceId,startTime:"",endTime:""}),e},watch:{},computed:{},created:function(){},mounted:function(){this.queryEquipmentInfo()},methods:{cancel:function(){this.$emit("update:show",!1)},queryClick:function(){this.queryingShowLoading=!0,this.equHistoryCharts()},queryEquipmentInfo:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findByHostId,{hostId:e.equipmentInfo.hostId});case 2:a=t.sent,e.form=a.data;case 4:case"end":return t.stop()}},t,e)}))()},queryEquTypeList:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findEquipmentModleItem,{typeCode:e.equipmentInfo.deviceTypeMini});case 2:a=t.sent,e.typeList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},equHistoryCharts:function(){var e=this;return i()(s.a.mark(function t(){var a,o,r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e,a=document.getElementById("equHistory"),o=[],r=[],t.next=6,e.$http.post(e.$equApi.findEquipmentItemHistory,e.queryParams);case 6:(i=t.sent).data.forEach(function(e){o.push(Object(n.c)("yyyy-MM-dd hh:mm:ss",new Date(e.time))),r.push(e.value)}),e._renderLineCharts(a,o,r),i&&(e.queryingShowLoading=!1);case 10:case"end":return t.stop()}},t,e)}))()},_renderLineCharts:function(e,t,a){var o=h.a.init(e),s={grid:{top:"10px",left:"10px",right:"4%",bottom:"3%",containLabel:!0},tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",axisLine:{lineStyle:{color:"#ddd"}},axisLabel:{color:"#333",fontSize:10},data:t.map(function(e){return e.replace(" ","\n")})},yAxis:{type:"value",axisLine:{lineStyle:{color:"#ddd"}},axisLabel:{show:!0,color:"#333",fontSize:10},splitLine:{show:!1}},series:[{data:a,type:"line"}]};o.setOption(s)}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,inline:!0,"label-width":"140px",size:"mini"}},[a("el-form-item",{attrs:{label:"主机编码:"}},[a("span",[e._v(e._s(e.form.hostQRCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"主机名称:"}},[a("span",[e._v(e._s(e.form.hostName))])]),e._v(" "),a("el-form-item",{attrs:{label:"主机类型:"}},[a("span",[e._v(e._s(e.form.hostType))])]),e._v(" "),a("el-form-item",{attrs:{label:"主机小类型:"}},[a("span",[e._v(e._s(e.form.hostTypeMini))])]),e._v(" "),a("el-form-item",{attrs:{label:"安装人id:"}},[a("span",[e._v(e._s(e.form.insUserId))])]),e._v(" "),a("el-form-item",{attrs:{label:"安装位置:"}},[a("span",[e._v(e._s(e.form.insLocation))])]),e._v(" "),a("el-form-item",{attrs:{label:"安装日期:"}},[a("span",[e._v(e._s(e._f("dateFormatFilter")(e.form.insDate,"yyyy-MM-dd hh:mm:ss")))])]),e._v(" "),a("el-form-item",{attrs:{label:"CCID:"}},[a("span",[e._v(e._s(e.form.ccid))])]),e._v(" "),a("el-form-item",{attrs:{label:"使用状况:"}},[a("span",[e._v(e._s(e.form.useStatus))])]),e._v(" "),a("el-form-item",{attrs:{label:"传输方式:"}},[a("span",[e._v(e._s(e.form.transferMethod))])]),e._v(" "),a("el-form-item",{attrs:{label:"是否模拟:"}},[a("span",[e._v(e._s(e.form.isSimulate))])]),e._v(" "),a("el-form-item",{attrs:{label:"通信协议:"}},[a("span",[e._v(e._s(e.form.letterAgreement))])]),e._v(" "),a("el-form-item",{attrs:{label:"版本号:"}},[a("span",[e._v(e._s(e.form.version))])]),e._v(" "),a("el-form-item",{attrs:{label:"厂家编码:"}},[a("span",[e._v(e._s(e.form.proComCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"生产商:"}},[a("span",[e._v(e._s(e.form.proComName))])]),e._v(" "),a("el-form-item",{attrs:{label:"产品类型:"}},[a("span",[e._v(e._s(e.form.proType))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属企业标识号:"}},[a("span",[e._v(e._s(e.form.opeCompany))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属服务器标识号:"}},[a("span",[e._v(e._s(e.form.opeService))])]),e._v(" "),a("el-form-item",{attrs:{label:"巡检频次:"}},[a("span",[e._v(e._s(e.form.insFrequency))])]),e._v(" "),a("el-form-item",{attrs:{label:"过保时间:"}},[a("span",[e._v(e._s(e._f("dateFormatFilter")(e.form.overTime,"yyyy-MM-dd hh:mm:ss")))])]),e._v(" "),a("el-form-item",{attrs:{label:"消防设施:"}},[a("span",[e._v(e._s(e.form.fireFacility))])]),e._v(" "),a("el-form-item",{attrs:{label:"片区id:"}},[a("span",[e._v(e._s(e.form.companyId))])]),e._v(" "),a("el-form-item",{attrs:{label:"片区编码:"}},[a("span",[e._v(e._s(e.form.companyCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户名Id:"}},[a("span",[e._v(e._s(e.form.addHostUserId))])]),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户编码:"}},[a("span",[e._v(e._s(e.form.addHostUserCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"新增设备用户名:"}},[a("span",[e._v(e._s(e.form.addHostUserName))])]),e._v(" "),a("el-form-item",{attrs:{label:"是否在线:"}},[a("span",[e._v(e._s(e.form.hostOnline))])]),e._v(" "),a("el-form-item",{attrs:{label:"设备配置编码:"}},[a("span",[e._v(e._s(e.form.equipmentConfigerCode))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancel}},[e._v("关 闭")])],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(v,y,!1,function(e){a("DKBE")},"data-v-5d084270",null).exports,_=(a("dkUZ"),{components:{dialogAdd:p,dialogView:b},props:[],data:function(){return{dialogAdd:!1,dialogView:!1,queryingShowLoading:!1,importingShowLoading:!1,uploadAndDownloadEqu:!1,uploadAndDownload:!1,uploadType:"nbSmoke",equList:[],queryParams:{insUserId:"",hostOnline:"",pageSize:10,pageNumber:1},uploadForm:{deviceName:"",equipmentConfigerCode:""},selectHostName:"",token:"",total:0,pageSize:10,currentPage:1,multipleSelection:[],pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()}},tHead:[{prop:"hostQRCode",label:"主机编号",width:""},{prop:"hostName",label:"主机名称",width:""},{prop:"hostOnline",label:"状态",width:"",formatter:function(e,t,a){return Object(l.deviceStatus)(a)}},{prop:"createTime",label:"新增时间",width:"",formatter:function(e,t,a){return Object(n.c)("yyyy-MM-dd hh:mm:ss",new Date(a))}},{prop:"proComName",label:"厂家名称",width:""},{prop:"proType",label:"产品类型",width:""},{prop:"insFrequency",label:"巡检频次",width:""},{prop:"overTime",label:"过保时间",width:"",formatter:function(e,t,a){return Object(n.c)("yyyy-MM-dd",new Date(a))}},{prop:"addHostUserName",label:"创建者",width:""},{prop:"merchantType",label:"修改者",width:""}],tBody:[],equipmentInfo:{},hostList:[],companyList:[]}},watch:{},computed:{templateURL:function(){return this.$equApi.importDevice},editShow:function(){return this.$permissionShow("equipment_edit")}},created:function(){},mounted:function(){this.token=Object(n.g)("_TOKEN_"),this.queryEquipmentList()},methods:{onQuery:function(){this.queryParams.pageNumber=1,this.queryEquipmentList()},addNew:function(){this.equipmentInfo={},this.dialogAdd=!0},openImportHost:function(){this.queryHostType()},queryHostType:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findMiniTypeByNoteAndParentCode,{note:"主机"});case 2:a=t.sent,e.hostList=a.data,e.uploadForm.deviceName=a.data[0].code,e.selectHostName=a.data[0].name,e.changeEqu();case 7:case"end":return t.stop()}},t,e)}))()},changeEqu:function(){var e=this;return i()(s.a.mark(function t(){var a,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,e.hostList.forEach(function(e){e.code==a.uploadForm.deviceName&&(a.selectHostName=e.name)}),t.next=4,e.$http.get(e.$equApi.getEquipmentConfiger,{miniTypeCode:e.uploadForm.deviceName});case 4:o=t.sent,e.companyList=o.data;case 6:case"end":return t.stop()}},t,e)}))()},deleteEquipment:function(){var e=this;return i()(s.a.mark(function t(){var a,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!(e.multipleSelection.length<=0)){t.next=5;break}return t.abrupt("return");case 5:e.multipleSelection.forEach(function(e){a.push(e.deviceId)});case 6:return t.next=8,e.$http.post(e.$equApi.hostDelete,a);case 8:"SUCCESS"==(o=t.sent).result?(e.$message({showClose:!0,message:"删除成功",type:"success"}),e.multipleSelection=[],e.onQuery()):e.$message({showClose:!0,message:o.message,type:"error"});case 10:case"end":return t.stop()}},t,e)}))()},_checkSchoolInfo:function(e){this.equipmentInfo=e,this.dialogView=!0},beforeUpload:function(e){this.token=Object(n.g)("_TOKEN_"),this.importingShowLoading=!0},uploadSuccess:function(e){var t=this;return this.importingShowLoading=!1,function(e,a,o){"SUCCESS"==e.result?(t.$message({showClose:!0,message:"导入成功",type:"success"}),t.uploadAndDownload=!1,t.uploadAndDownloadEqu=!1,t.refreshData()):t.$message({showClose:!0,message:"导入失败",type:"error"})}},uploadFailure:function(e,t,a){this.importingShowLoading=!1,this.$message({showClose:!0,message:"导入失败",type:"error"})},handleCurrentChange:function(e){this.queryParams.pageNumber=e,this.queryEquipmentList()},queryEquipmentList:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.hostList,e.queryParams);case 2:a=t.sent,e.tBody=a.data.hostList,e.total=parseInt(a.data.hostCount);case 5:case"end":return t.stop()}},t,e)}))()},_editSchoolInfo:function(e){this.equipmentInfo=e,this.dialogAdd=!0},queryHostTypeMini:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$equApi.findMiniTypeByNoteAndParentCode,{parentCode:e.equipmentInfo.hostTypeMini,type:"无线设备"});case 2:a=t.sent,e.hostList=a.data,e.uploadForm.deviceName=a.data[0].code,e.selectHostName=a.data[0].name,e.changeEqu();case 7:case"end":return t.stop()}},t,e)}))()},_importEqu:function(e){this.equipmentInfo=e,this.uploadForm.deviceName=e.hostTypeMini,this.queryHostTypeMini(),this.uploadAndDownloadEqu=!0},handleSelectionChange:function(e){this.multipleSelection=e},refreshData:function(){this.onQuery()},downloadEquTemplate:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(n.d)("http://39.98.173.65:9001/equipment/downloadTemplatezxwl?deviceMiniTypeCode="+e.uploadForm.deviceName);case 1:case"end":return t.stop()}},t,e)}))()}}}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{inline:!0,model:e.queryParams,size:"small"}},[a("el-form-item",{attrs:{label:"安装人id:",prop:"name"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.queryParams.insUserId,callback:function(t){e.$set(e.queryParams,"insUserId","string"==typeof t?t.trim():t)},expression:"queryParams.insUserId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"在线状态:",prop:"name"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.queryParams.hostOnline,callback:function(t){e.$set(e.queryParams,"hostOnline","string"==typeof t?t.trim():t)},expression:"queryParams.hostOnline"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button-query",attrs:{type:"primary",loading:e.queryingShowLoading},on:{click:e.onQuery}},[e._v("查询\n\t\t\t\t")])],1)],1),e._v(" "),a("div",{staticClass:"use-table"},[a("div",{staticClass:"clear-fix mb10"},[this.$permissionShow("equipment_create")?a("el-button",{staticClass:"button-query fr",attrs:{type:"primary",size:"small"},on:{click:e.addNew}},[e._v("新增主机")]):e._e(),e._v(" "),this.$permissionShow("equipment_delete")?a("el-button",{staticClass:"button-query fr mr10",attrs:{type:"warning",size:"small"},on:{click:e.deleteEquipment}},[e._v("删除主机\n\t\t\t\t")]):e._e(),e._v(" "),this.$permissionShow("equipment_import")?a("el-button",{staticClass:"button-query fr mr10",attrs:{size:"small",type:"success"},on:{click:e.openImportHost}},[e._v("导入主机\n\t\t\t\t\t")]):e._e(),e._v(" "),this.$permissionShow("equipment_import")?a("el-button",{staticClass:"button-query fr mr10",attrs:{type:"primary",size:"small"},on:{click:function(t){e.openImportHost=!e.uploadAndDownload}}},[e._v("下载模板\n\t\t\t\t")]):e._e()],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tBody,border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e._l(e.tHead,function(e){return a("el-table-column",{key:e.prop,attrs:{align:"center",prop:e.prop,label:e.label,width:e.width,formatter:e.formatter}})}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:"查看",placement:"bottom"}},[a("el-button",{staticClass:"iconfont icon-chakan",attrs:{type:"text"},on:{click:function(a){e._checkSchoolInfo(t.row)}}})],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"导入",placement:"bottom"}},[a("el-button",{staticClass:"el-icon-download",staticStyle:{"font-size":"22px"},attrs:{type:"text"},on:{click:function(a){e._importEqu(t.row)}}})],1),e._v(" "),e.editShow?a("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"bottom"}},[a("el-button",{staticClass:"iconfont icon-biji",attrs:{type:"text"},on:{click:function(a){e._editSchoolInfo(t.row)}}})],1):e._e()]}}])})],2),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"page",attrs:{"current-page":e.queryParams.pageNumber,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total,disabled:e.queryingShowLoading},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogAdd?a("el-dialog",{attrs:{title:e.equipmentInfo.hostQRCode?"编辑":"新增",visible:e.dialogAdd,width:"60%"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("dialogAdd",{attrs:{show:e.dialogAdd,equipmentInfo:e.equipmentInfo},on:{"update:show":function(t){e.dialogAdd=t},refreshData:e.refreshData}})],1):e._e(),e._v(" "),e.dialogView?a("el-dialog",{attrs:{title:"查看",visible:e.dialogView,width:"60%"},on:{"update:visible":function(t){e.dialogView=t}}},[a("dialogView",{attrs:{show:e.dialogView,equipmentInfo:e.equipmentInfo},on:{"update:show":function(t){e.dialogView=t}}})],1):e._e(),e._v(" "),e.uploadAndDownload?a("el-dialog",{attrs:{title:"上传与下载",visible:e.uploadAndDownload,width:"60%"},on:{"update:visible":function(t){e.uploadAndDownload=t}}},[a("div",{staticClass:"clearfix mt10 mb10 pl30"},[a("el-select",{staticClass:"fl mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.changeEqu},model:{value:e.uploadForm.deviceName,callback:function(t){e.$set(e.uploadForm,"deviceName",t)},expression:"uploadForm.deviceName"}},e._l(e.hostList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1),e._v(" "),a("el-select",{staticClass:"fl mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.uploadForm.equipmentConfigerCode,callback:function(t){e.$set(e.uploadForm,"equipmentConfigerCode",t)},expression:"uploadForm.equipmentConfigerCode"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.des,value:e.code}})}),1),e._v(" "),a("el-button",{staticClass:"button-query fl mr10",attrs:{size:"small",loading:e.importingShowLoading,type:"primary"},on:{click:e.downloadEquTemplate}},[e._v("下载模板\n                ")]),e._v(" "),a("el-upload",{staticClass:"button-query fl",attrs:{action:e.templateURL,headers:{"X-Access-Token":e.token},data:e.uploadForm,"on-success":e.uploadSuccess(),"on-error":e.uploadFailure,"before-upload":e.beforeUpload,disabled:e.importingShowLoading,"show-file-list":!1}},[a("el-button",{staticClass:"button-query",attrs:{size:"small",loading:e.importingShowLoading,type:"success"}},[e._v("导入主机\n                    ")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.uploadAndDownload=!1}}},[e._v("关闭")])],1)]):e._e(),e._v(" "),e.uploadAndDownloadEqu?a("el-dialog",{attrs:{title:"上传与下载",visible:e.uploadAndDownloadEqu,width:"60%"},on:{"update:visible":function(t){e.uploadAndDownloadEqu=t}}},[a("div",{staticClass:"clearfix mt10 mb10 pl30"},[a("el-select",{staticClass:"fl mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.changeEqu},model:{value:e.uploadForm.deviceName,callback:function(t){e.$set(e.uploadForm,"deviceName",t)},expression:"uploadForm.deviceName"}},e._l(e.hostList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1),e._v(" "),a("el-select",{staticClass:"fl mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.uploadForm.equipmentConfigerCode,callback:function(t){e.$set(e.uploadForm,"equipmentConfigerCode",t)},expression:"uploadForm.equipmentConfigerCode"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.des,value:e.code}})}),1),e._v(" "),a("el-button",{staticClass:"button-query fl mr10",attrs:{size:"small",loading:e.importingShowLoading,type:"primary"},on:{click:e.downloadEquTemplate}},[e._v("下载模板\n                ")]),e._v(" "),a("el-upload",{staticClass:"button-query fl",attrs:{action:e.templateURL,headers:{"X-Access-Token":e.token},data:{equipmentConfigerCode:this.uploadForm.equipmentConfigerCode,hostId:this.equipmentInfo.hostId,hostCode:this.equipmentInfo.hostQRCode},"on-success":e.uploadSuccess(),"on-error":e.uploadFailure,"before-upload":e.beforeUpload,disabled:e.importingShowLoading,"show-file-list":!1}},[a("el-button",{staticClass:"button-query",attrs:{size:"small",loading:e.importingShowLoading,type:"success"}},[e._v("导入设备\n                    ")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.uploadAndDownloadEqu=!1}}},[e._v("关闭")])],1)]):e._e()],1)},staticRenderFns:[]};var C=a("C7Lr")(_,g,!1,function(e){a("avUo")},"data-v-3c42b346",null);t.default=C.exports}});