webpackJsonp([5],{HT4T:function(e,t){},PWUZ:function(e,t){},vIID:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),s=a("J0Oq"),o=a.n(s),i={components:{},mixins:[],props:["companyInfo"],data:function(){return{form:{address:"",directorTel:"",fireTel:"",fireUnit:"",lat:"",lon:"",name:"",parentId:""}}},watch:{},computed:{},created:function(){},mounted:function(){this.companyInfo.id?this.form=this.companyInfo:this.form.parentId=this.companyInfo.parentId},methods:{addNew:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post(e.$urlApi.addCompony,e.form);case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"操作成功"}),e.$emit("refreshData"));case 4:case"end":return t.stop()}},t,e)}))()},modify:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put(e.$urlApi.editCompony,e.form);case 2:"SUCCESS"==t.sent.result&&(e.$message({type:"success",message:"操作成功"}),e.$emit("refreshData"));case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.$emit("update:show",!1)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"片区名称:"}},[a("el-input",{staticClass:"input-search",attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer text-right pb20"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),e.companyInfo.id?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addNew}},[e._v("确 定")]),e._v(" "),e.companyInfo.id?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.modify}},[e._v("确 定")]):e._e()],1)],1)},staticRenderFns:[]};var c={components:{dialogAdd:a("C7Lr")(i,l,!1,function(e){a("HT4T")},"data-v-74839cee",null).exports},mixins:[],props:[],data:function(){return{dialogAdd:!1,dialogTitle:"",companyInfo:{},companyList:[],defaultProps:{children:"children",label:"label"},selectAreaId:""}},watch:{},computed:{},created:function(){},mounted:function(){this.getCompany()},methods:{handleNodeClick:function(e){console.log(e)},getCompany:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(e.$urlApi.getCompany);case 2:a=t.sent,e.companyList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},addNew:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.dialogTitle="新增片区",e.dialogAdd=!0;case 2:case"end":return t.stop()}},t,e)}))()},modify:function(){this.dialogTitle="编辑片区",this.dialogAdd=!0},deleteCompany:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.delete(e.$urlApi.deleteCompony,{compIds:e.selectAreaId});case 2:"SUCCESS"==t.sent.result&&(e.$message.success("删除成功"),e.getCompany());case 4:case"end":return t.stop()}},t,e)}))()},selectArea:function(e){this.selectAreaId="",this.parentTree=[],this.selectAreaId=e.value,this.getCompanyInfo(this.selectAreaId)},getCompanyInfo:function(e){var t=this;return o()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get(t.$urlApi.getCompanyInfo,{compId:e});case 2:n=a.sent,t.companyInfo=n.data;case 4:case"end":return a.stop()}},a,t)}))()},refreshData:function(){this.dialogAdd=!1,this.getCompany()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"area-list fl"},[a("el-tree",{ref:"companyTree",attrs:{data:e.companyList,"check-strictly":"","show-checkbox":"","default-expand-all":"","node-key":"value","highlight-current":"",props:e.defaultProps},on:{check:e.selectArea}})],1),e._v(" "),a("div",{staticClass:"area-info fl ml20"},[a("div",{staticClass:"clear-fix mb10"},[a("el-button",{staticClass:"button-query fl",attrs:{type:"primary",size:"small"},on:{click:e.addNew}},[e._v("新增片区")]),e._v(" "),a("el-button",{staticClass:"button-query fl",attrs:{type:"primary",size:"small"},on:{click:e.modify}},[e._v("编辑片区")]),e._v(" "),a("el-button",{staticClass:"button-query fl ml10",attrs:{type:"warning",size:"small"},on:{click:e.deleteCompany}},[e._v("删除片区")])],1),e._v(" "),a("div",[a("el-form",{attrs:{"label-width":"100px",size:"mini","label-position":"left"}},[a("el-form-item",{attrs:{label:"片区名称:"}},[a("span",[e._v(e._s(e.companyInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建者:"}},[a("span",[e._v(e._s(e.companyInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间:"}},[a("span",[e._v(e._s(e._f("dateFormatFilter")(e.companyInfo.dateCreated)))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改者:"}},[a("span",[e._v(e._s(e.companyInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改时间:"}},[a("span",[e._v(e._s(e._f("dateFormatFilter")(e.companyInfo.lastUpdated)))])])],1)],1)]),e._v(" "),e.dialogAdd?a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogAdd,width:"60%"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("dialogAdd",{attrs:{show:e.dialogAdd,companyInfo:e.companyInfo},on:{"update:show":function(t){e.dialogAdd=t},refreshData:e.refreshData}})],1):e._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(c,d,!1,function(e){a("PWUZ")},"data-v-9d5f9844",null);t.default=m.exports}});